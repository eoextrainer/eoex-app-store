<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="manifest" href="/manifest.json"/>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/service-worker.js");
    }
  </script>
  <title>Sosthene App Store</title>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <header>
    <h1>Sosthene App Store</h1>
    <input id="q" placeholder="Search apps"/>
  </header>
  <main id="catalog"></main>
  <script type="module">
    async function load() {
      const res = await fetch("/api/apps");
      const apps = await res.json();
      const m = document.getElementById("catalog");
      m.innerHTML = apps.map(a => `
        <article class="card">
          <h2>${a.name}</h2>
          <p>${a.description}</p>
          <a href="/app/${a.slug}">View</a>
        </article>`).join("");
    }
    load();
  </script>
</body>
</html>
